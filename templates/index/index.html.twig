{% extends 'base.html.twig' %}

{% form_theme form 'bootstrap_5_layout.html.twig' %}

{% block title %}Products List{% endblock %}

{% block body %}
<div class="container mt-4">
{{ form_start(form) }}

<div class="form-row align-items-end">
  <div class="col">
    {{ form_row(form.name) }}
  </div>

  <div class="col">
    <div class="form-group">
      <button type="submit" class="btn btn-success">
        Search
      </button>
    </div>
  </div>
</div>

{{ form_end(form) }}
<h1> Products List </h1>
{% if products %}
<table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Product</th>
      <th scope="col">Price</th>
      <th scope="col">Quantity</th>
      <th scope="col">Category</th>
      <th scope="col">Details</th>
      <th scope="col">Edit</th>
      <th scope="col">Delete</th>
    </tr>
  </thead>
  <tbody>
    {% for product in products %}
        <tr>
            <td> {{ product.id }} </td>
            <td> {{ product.name }} </td>
            <td> {{ product.price }} </td>
            <td> {{ product.quantity }} </td>
            <td> {{ product.category.name }} </td>
            <td><a href="/product/{{ product.id }}" class="btn btn-secondary">Details</a></td>
            <td><a href="/product/edit/{{ product.id }}" class="btn btn-primary">Edit</a></td>
            <td><a href="/product/delete/{{ product.id }}" onclick="return confirm('Are you sure you want to delete this product ?');" class="btn btn-danger">Delete</a></td>
        </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<h2>No Records</h2>
{% endif %}
</div>
{% endblock %}
